import{_ as e,u as r}from"./useTable.7d8a6e5e.js";import{a}from"./useForm.e9f08473.js";import{P as t}from"./index.24ce52d8.js";import{a as o}from"./index.21fd786f.js";import{a as s,b as i}from"./MemberHistoryManager.config.9b88abf4.js";import{g as n}from"./member.b5761d5d.js";import{m as d,a7 as m,av as l,N as c,n as f,O as b,V as p,Q as u}from"./vendor.8be1affb.js";import{_ as g,a as j}from"./MemberBalanceEditorModal.9491d964.js";import{b as x,ag as M}from"./index.e1fec598.js";import"./index.1c224cd3.js";/* empty css              *//* empty css              *//* empty css              */import"./useContentViewHeight.1cc3b3a8.js";/* empty css              */import"./useSortable.92d684a3.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */var h=d({name:"MemberBalanceHistoryManager",components:{PageWrapper:t,BasicTable:e,TableAction:a,MemberEditorModal:g,MemberBalanceEditorModal:j},setup(){const[e,{openModal:a}]=o(),t=x(),d=s.filter((e=>t.getUserInfo.Type==M.配置员||"SiteId"!==e.field)),c=i.filter((e=>t.getUserInfo.Type==M.配置员||"SiteId"!==e.dataIndex));c.filter((e=>["MemberName","MemberTel"].some((r=>e.dataIndex===r)))).forEach((e=>e.customRender=({record:r})=>{var t,o;return void 0!==r[null!=(t=e.dataIndex)?t:""]?m("a",{onClick:()=>{a(r)}},r[null!=(o=e.dataIndex)?o:""]):""}));const[f,{reload:b,getRawDataSource:p}]=r({title:"余额流水",canColDrag:!0,showIndexColumn:!1,striped:!0,canResize:!0,columns:c,api:n,formConfig:{labelWidth:80,schemas:d},useSearchForm:!0,showTableSetting:!0,bordered:!0,actionColumn:{width:0,title:"操作",dataIndex:"action",slots:{customRender:"action"},fixed:"right"},showSummary:!0,summaryFunc:()=>[{Id:"合计",Amount:p().Amount}]});function u(){b()}return l("Enter",(e=>{var r;e.preventDefault(),"[object HTMLInputElement]"==(null==(r=e.target)?void 0:r.toString())&&u()})),{registerTable:f,registerMemberEditorModal:e,handleRefresh:u}}});h.render=function(e,r,a,t,o,s){const i=c("BasicTable"),n=c("MemberEditorModal"),d=c("PageWrapper");return f(),b(d,{dense:"",contentFullHeight:"",fixedHeight:""},{default:p((()=>[u(i,{onRegister:e.registerTable,onMember:r[0]||(r[0]=()=>{})},{toolbar:p((()=>[])),_:1},8,["onRegister"]),u(n,{onRegister:e.registerMemberEditorModal,onSuccess:e.handleRefresh},null,8,["onRegister","onSuccess"])])),_:1})};export{h as default};
