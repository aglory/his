import{_ as e,u as r}from"./useTable.7d8a6e5e.js";import{a}from"./useForm.e9f08473.js";import{P as t}from"./index.24ce52d8.js";import{a as o}from"./index.21fd786f.js";import{s,q as n}from"./MemberHistoryManager.config.9b88abf4.js";import{f as i}from"./member.b5761d5d.js";import{m as d,a7 as m,av as l,N as c,n as f,O as u,V as b,Q as p}from"./vendor.8be1affb.js";import{_ as g,a as M}from"./MemberBalanceEditorModal.9491d964.js";import{b as j,ag as x}from"./index.e1fec598.js";import"./index.1c224cd3.js";/* empty css              *//* empty css              *//* empty css              */import"./useContentViewHeight.1cc3b3a8.js";/* empty css              */import"./useSortable.92d684a3.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */var h=d({name:"MemberBalanceHistoryManager",components:{PageWrapper:t,BasicTable:e,TableAction:a,MemberEditorModal:g,MemberBalanceEditorModal:M},setup(){const[e,{openModal:a}]=o(),t=j(),d=s.filter((e=>t.getUserInfo.Type==x.配置员||"SiteId"!==e.field)),c=n.filter((e=>t.getUserInfo.Type==x.配置员||"SiteId"!==e.dataIndex));c.filter((e=>["MemberName","MemberTel"].some((r=>e.dataIndex===r)))).forEach((e=>e.customRender=({record:r})=>{var t,o;return void 0!==r[null!=(t=e.dataIndex)?t:""]?m("a",{onClick:()=>{!function(e){a(!0,{Id:e.MemberId})}(r)}},r[null!=(o=e.dataIndex)?o:""]):""}));const[f,{reload:u,getRawDataSource:b}]=r({title:"资金流水",canColDrag:!0,showIndexColumn:!1,striped:!0,canResize:!0,columns:c,api:i,formConfig:{labelWidth:80,schemas:d},useSearchForm:!0,showTableSetting:!0,bordered:!0,actionColumn:{width:0,title:"操作",dataIndex:"action",slots:{customRender:"action"},fixed:"right"},showSummary:!0,summaryFunc:()=>[{Id:"合计",Amount:b().Amount}]});function p(){u()}return l("Enter",(e=>{var r;e.preventDefault(),"[object HTMLInputElement]"==(null==(r=e.target)?void 0:r.toString())&&p()})),{registerTable:f,registerMemberEditorModal:e,handleRefresh:p}}});h.render=function(e,r,a,t,o,s){const n=c("BasicTable"),i=c("MemberEditorModal"),d=c("PageWrapper");return f(),u(d,{dense:"",contentFullHeight:"",fixedHeight:""},{default:b((()=>[p(n,{onRegister:e.registerTable,onMember:r[0]||(r[0]=()=>{})},{toolbar:b((()=>[])),_:1},8,["onRegister"]),p(i,{onRegister:e.registerMemberEditorModal,onSuccess:e.handleRefresh},null,8,["onRegister","onSuccess"])])),_:1})};export{h as default};
